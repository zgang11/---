<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .h1 {
            background-color: yellow;
        }
    </style>
</head>


<body>
    <div id="root"></div>
    <!-- <script>
        const add1 = (x) => x + 1;
        const mul3 = (x) => x * 3;
        const div2 = (x) => x / 2;
        div2(mul3(add1(add1(0)))); //=>3

        function compose(...fn) {
            return function (val) {
                return fn.reverse().reduce((acc, cur) => {
                    return cur(acc)
                }, val)
            }
        }

        let composeFun = compose(add1, add1, mul3, div2)
        let result = composeFun(0)
        console.log(result)
    </script> -->
    <!-- <script>
        function add(){
            let args = Array.prototype.slice.call(arguments)
            function add_(){
                let new_args = Array.prototype.slice.call(arguments)
                args.push(...new_args)
                return add_
            }
            add_.toString = function(){
                return  args.reduce((acc, cur) => {
                    return acc + cur
                })
            }
            return add_
        }
        console.log(add(1)(2)(3).toString())
    </script> -->
    <!-- <script>
        class Scheduler {
            constructor() {
                this.list = []
                this.maxCount = 3
                this.currentIndex = 0

            }
            add = function (fn) {
                this.list.push(fn)
            }
            taskStart = function () {
                for (let i = 0; i < this.maxCount; i++) {
                    this.request()
                }
            }
            request = function () {
                if (this.list.length === 0 || this.currentIndex > this.list.length) return
                this.currentIndex++
                this.list.shift()().then(() => {
                    this.currentIndex--
                    this.request()
                })
            }

        }
        let scheduler = new Scheduler()

        function timeout(time) {
            return new Promise(resolve => {
                setTimeout(resolve, time)
            })
        }

        function addTask(time, order) {
            scheduler.add(() => timeout(time).then(() => console.log(order)))
        }


        addTask(1000, 1)
        addTask(5000, 1)
        addTask(300, 3)
        addTask(400, 4)

        scheduler.taskStart()
    </script> -->
    <!-- <script>
        function getObjType(obj) {
            function getType(obj) {
                if (obj === null) {
                    return String(obj)
                }
                return obj.constructor.name
            }
            return typeof obj === 'object' ? getType(obj) : typeof obj
        }

        function Person() {

        }
        let per = new Person()
        class Oc { }
        let o = new Oc
        console.log(getObjType(null)) // -> null
        console.log(getObjType(undefined)) // -> undefined
        console.log(getObjType({})) // -> object
        console.log(getObjType([])) // -> array
        console.log(getObjType(123)) // -> number
        console.log(getObjType(true)) // -> boolean
        console.log(getObjType('123')) // -> string
        console.log(getObjType(/123/)) // -> regexp
        console.log(getObjType(new Date())) // -> date
        console.log(getObjType(new Set([]))) // ->set
        console.log(getObjType(per.constructor))
        console.log(getObjType(o))
        console.log(getObjType(o.constructor))
    </script> -->
    <script>
        //  异步获取数据,一秒之后返回结果
        // let testPromise = () => new Promise((resolve, reject) => { 
        //     console.log('woshishui')
        //     setTimeout(() => resolve('success'), 1000) 
        // });

        // async function testAsync() {
        //     console.log("entry testAsync");
        //     const returnValue = await testPromise();
        //     console.log("getAsyncValue");
        // }

        // function test() {
        //     console.log("entry test");
        //     testAsync();
        //     console.log("end test");
        // }
        // test()

        // "entry test"  "entry testAsync"   "end test"  "getAsyncValue"

        // async function async1() {
        //     console.log('1')
        //     console.log(await async2())
        //     console.log('2')
        // }
        // async function async2() {
        //     console.log('3')
        //     setTimeout(
        //         () => console.log('4')
        //         , 0)
        //     console.log('5')

        //     return 'wo'
        // }
        // console.log('6')
        // setTimeout(function () {
        //     console.log('7')
        // }, 0)
        // async1();
        // new Promise(function (resolve) {
        //     console.log('8')
        //     resolve();
        // }).then(function () {
        //     console.log('9')
        // })
        // console.log('10')

        // // 6  1  3  5   8  10  undefined 2  9  7  4

        // function render (obj, container){
        //     if(typeof container !== 'object'){
        //         container = document.querySelector(container)
        //     }
        //     container.appendChild(render_(obj))
        // }

        // function render_(obj){
        //     if(typeof obj !== 'object'){
        //         return document.createTextNode(obj)
        //     }else {
        //         let dom = document.createElement(obj.tag)
        //         if(obj.attrs){
        //             for(let key in obj.attrs){
        //                 let value = obj.attrs[key]
        //                 dom.setAttribute(key, value)
        //             }
        //         }

        //         if(obj.children && Array.isArray(obj.children)){
        //             obj.children.forEach(node => {
        //               render(node, dom)
        //             });
        //         }else {
        //               render(obj.children, dom)  
        //         }
        //         return dom
        //     }
        // }

        // let obj = {
        //     tag: 'div',
        //     attrs: {
        //         class: 'title'
        //     },
        //     children: [
        //         {
        //             tag: 'h1',
        //             attrs: {
        //                 class: 'h1',
        //             },
        //             children: '我是h1标签'
        //         }, {
        //             tag: 'h4',
        //             attrs: {
        //                 class: 'h4'
        //             },
        //             children: '我是h4标签'
        //         }
        //     ]
        // }

        // console.log(render(obj, '#root'))


        // let arr = [3, 6, 7, [3, 5, 6, [3, 0],
        //     [2, 3, 40]
        // ]]

        // function flat_1(arr, depth) {
        //    return depth > 0 ? arr.reduce((acc, cur) => {
        //        return Array.isArray(cur) ? [...acc, ...flat_1(cur, depth - 1)] : [...acc, cur]
        //    }, []) : arr
        // }
        // console.log(flat_1(arr, 0))
    </script>
</body>

</html>