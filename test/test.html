<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    // // 实现一个promise
    // const PENDING = "pending"
    // const RESOLVE = "resolve"
    // const REJECTED = "reject"

    // function MyPromise(fn) {
    //   let this_ = this
    //   this_.status = PENDING
    //   this.value = null


    //   this_.resolve = function (value) {
    //     if (value instanceof MyPromise) {
    //       value.then(res => MyPromise.resolve(res))
    //     }
    //     setTimeout(() => {
    //       if (this.status === PENDING) {
    //         this.status = RESOLVE
    //         this.value = value
    //       }
    //     }, 0)

    //   }

    //   this_.reject = function (value) {
    //     setTimeout(() => {
    //       if (this.status === PENDING) {
    //         this_.status = REJECTED
    //         this_.value = value
    //       }
    //     }, 0);
    //   }
    //   try {
    //     fn(this._resolve, this_.reject)
    //   } catch (e) {
    //     this_.reject(e)
    //   }
    // }

    // MyPromise.prototype.all = function (arr) {
    //   let args = Array.prototype.slice.call(arr)
    //   return new MyPromise((resolve, reject) => {
    //     if (!args.length) resolve([])
    //     let remaining = args.length
    //     for (let i = 0; i < args.length; i++) {
    //       res[arr[i], i]
    //     }
    //   })

    //   function res(val, i) {

    //   }
    // }


    // const promise = new MyPromise((resolve, reject) => {
    //   console.log('aaa')
    // })


    // 实现一个generator
    // function $Gen(context_) {
    //   while (1) {
    //     switch (context_.prev = context_.next) {
    //       case 0:
    //         context_.next = 2
    //         return 'result'
    //       case 2:
    //         context_.next = 6
    //         return 'result2'
    //       case 6:
    //         return context_.setDone()
    //     }
    //   }
    // }


    // const context = {
    //   next: 0,
    //   prev: 0,
    //   done: false,
    //   setDone: function () {
    //     this.done = true
    //   },

    // }

    // function Gen() {
    //   return {
    //     next: function () {
    //       let value = context.value ? undefined : $Gen(context)
    //       let done = context.done
    //       return {
    //         value,
    //         done
    //       }
    //     }
    //   }
    // }


    // let gen = Gen()


    // 实现await/async
    // function *Gen(){
    //   yield setTimeout(() => { }, 10000)
    //   yield 'result'
    // }
    // let gen = Gen()


    // 点击按钮，就执行一次函数，申请一块内存
    // startBtn.addEventListener("click", function () {
    //   var a = new Array(100000).fill(1);
    //   var b = new Array(20000).fill(1);
    // });


    // const flat_ = function (arr, depth) {
    //   return depth > 0 ? arr.reduce((acc, cur) => {
    //     return Array.isArray(cur) ? [...acc, ...flat_(cur, depth - 1)] : [...acc, cur]
    //   }, []) : arr
    // }

    // const arr = [3, 4, 6, [3, 5, [3, 6]]]
    // console.log(flat_(arr, 1))

    // function createAxios(url, methods){
    //      return new Promise((resolve, reject) => {
    //          let xhr = new XMLHttpRequest()
    //          xhr.open(url, methods)
    //          xhr.setRequestHeader('','')
    //          xhr.onreadystatechange = function(res){
    //             if(xhr.readyState === 4 && xhr.status === 200){
    //               resolve( xhr.responseText)
    //             }else {
    //               reject(xhr.responseText)
    //             }
    //          }
    //          xhr.send()
    //      })
    // }

    // function sort_(arr) {
    //   let len = arr.length
    //   for (let i = len - 1; i >= 0; i--) {
    //     let randomIndex = Math.floor( Math.random() * len)
    //     let swap = arr[randomIndex]
    //     arr[randomIndex] = arr[i]
    //     arr[i] = swap
    //   }
    //   return arr
    // }

    // const arr1 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    // console.log(arr1)
    // console.log(sort_(arr1))

    //   let reg = /(\d){3}/g
    //   let str = '1234567654678987654467'
    //  let str_ = str.replace(reg, ($1) => {
    //     return  $1 + ','
    //  })
    //   console.log(str_.split('').reverse().join(''))

    let set = new Set()
    let a = { a: 1, b: { c: 2 } }
    let b = { b: { c: 1 }, a: 1 }
    set.add(a)
    set.add(b)
    const isSameObject = function (a, b) {
      console.log(a,b)
      // 基本类型
      if (typeof a !== 'object' && typeof b !== 'object') {
         return a === b
      }
      if (typeof a !== 'object' || typeof b !== 'object') {
        return false
      }
      if (Object.keys(a).length !== Object.keys(b).length) {
        return false
      }
      let result = []
      for (let [i, v] of Object.entries(a)) {
        result.push(isSameObject(a[i], b[i])) 
      }
      // return truc
      console.log(result)
    }
    console.log(isSameObject(a, b))

  //   [{ a: 1, b: 2 }, { a: 1 }, { a: 1 }, { a: 1, b: { c: 1 } }, { b: { c: 1 }, a: 1 }]
  // => [{ a: 1, b: 2 }, { a: 1 }, { a: 1, b: { c: 1 } }]
  </script>
</body>

</html>